"use strict";(self.webpackChunksqq92p=self.webpackChunksqq92p||[]).push([[97],{5604:(e,s,n)=>{n.r(s),n.d(s,{default:()=>dn});var a=n(2791),t=n(3160),l=n(1828),o=n(1196),i=n(8008);const r=()=>{"undefined"!==typeof document&&(document.documentElement.style.removeProperty("--SideNavigation-slideIn"),document.body.style.removeProperty("overflow"))},d=()=>{if("undefined"!==typeof window&&"undefined"!==typeof document){window.getComputedStyle(document.documentElement).getPropertyValue("--SideNavigation-slideIn")?r():"undefined"!==typeof document&&(document.body.style.overflow="hidden",document.documentElement.style.setProperty("--SideNavigation-slideIn","1"))}};var c=n(184);function h(){return(0,c.jsxs)(l.Z,{sx:{display:{xs:"flex",md:"none"},alignItems:"center",justifyContent:"space-between",position:"fixed",top:0,width:"100vw",height:"var(--Header-height)",zIndex:9995,p:2,gap:1,borderBottom:"1px solid",borderColor:"background.level1",boxShadow:"sm"},children:[(0,c.jsx)(t.Z,{styles:e=>({":root":{"--Header-height":"52px",[e.breakpoints.up("md")]:{"--Header-height":"0px"}}})}),(0,c.jsx)(o.ZP,{onClick:()=>d(),variant:"outlined",color:"neutral",size:"sm",children:(0,c.jsx)(i.Z,{})})]})}var x=n(6263),p=n(5079),m=n(5096),u=n(1983),j=n(3917),Z=n(3168),g=n(3201),b=n(6149),y=n(5172),f=n(4846),v=n(2746),w=n(4773);function C(e){let{onClick:s,sx:n,...t}=e;const{mode:l,setMode:i}=(0,f.tv)(),[r,d]=a.useState(!1);return a.useEffect((()=>{d(!0)}),[]),r?(0,c.jsxs)(o.ZP,{id:"toggle-mode",size:"sm",variant:"outlined",color:"neutral",...t,onClick:e=>{i("light"===l?"dark":"light"),null===s||void 0===s||s(e)},sx:[{"& > *:first-child":{display:"dark"===l?"none":"initial"},"& > *:last-child":{display:"light"===l?"none":"initial"}},...Array.isArray(n)?n:[n]],children:[(0,c.jsx)(v.Z,{}),(0,c.jsx)(w.Z,{})]}):(0,c.jsx)(o.ZP,{size:"sm",variant:"outlined",color:"neutral",...t,sx:n,disabled:!0})}var S=n(1087),P=n(1397),D=n(7689);function T(e){let{defaultExpanded:s=!1,renderToggle:n,children:t}=e;const[l,o]=a.useState(s);return(0,c.jsxs)(a.Fragment,{children:[n({open:l,setOpen:o}),(0,c.jsx)(x.Z,{sx:{display:"grid",gridTemplateRows:l?"1fr":"0fr",transition:"0.2s ease","& > *":{overflow:"hidden"}},children:t})]})}function k(e){let{menuItems:s}=e;const n=function(){const e=(0,D.s0)();return async function(){P.pb.authStore.clear(),e("/login")}}();return(0,c.jsxs)(l.Z,{className:"Sidebar",sx:{position:"fixed",transform:{xs:"translateX(calc(100% * (var(--SideNavigation-slideIn, 0) - 1)))",md:"none"},transition:"transform 0.4s, width 0.4s",zIndex:1e4,height:"100dvh",width:"var(--Sidebar-width)",top:0,p:2,flexShrink:0,display:"flex",flexDirection:"column",gap:2,borderRight:"1px solid",borderColor:"divider"},children:[(0,c.jsx)(t.Z,{styles:e=>({":root":{"--Sidebar-width":"220px",[e.breakpoints.up("lg")]:{"--Sidebar-width":"240px"}}})}),(0,c.jsx)(x.Z,{className:"Sidebar-overlay",sx:{position:"fixed",zIndex:9998,top:0,left:0,width:"100vw",height:"100vh",opacity:"var(--SideNavigation-slideIn)",backgroundColor:"var(--joy-palette-background-backdrop)",transition:"opacity 0.4s",transform:{xs:"translateX(calc(100% * (var(--SideNavigation-slideIn, 0) - 1) + var(--SideNavigation-slideIn, 0) * var(--Sidebar-width, 0px)))",lg:"translateX(-100%)"}},onClick:()=>r()}),(0,c.jsxs)(x.Z,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,c.jsx)(o.ZP,{variant:"soft",color:"primary",size:"sm",children:(0,c.jsx)(b.Z,{})}),(0,c.jsx)(Z.ZP,{level:"title-lg",children:"SurgeryX"}),(0,c.jsx)(o.ZP,{variant:"soft",color:"primary",size:"sm",className:"logout-button",onClick:n,children:(0,c.jsx)(g.Z,{})}),(0,c.jsx)(C,{sx:{ml:"auto"}})]}),(0,c.jsx)(p.Z,{size:"sm",sx:{gap:1},children:s.map(((e,s)=>(0,c.jsx)(m.Z,{nested:e.nested,children:e.nested?(0,c.jsx)(T,{renderToggle:s=>{let{open:n,setOpen:a}=s;return(0,c.jsxs)(u.Z,{onClick:()=>a(!n),children:[e.icon,(0,c.jsx)(j.Z,{children:(0,c.jsx)(Z.ZP,{level:"title-sm",children:e.label})}),(0,c.jsx)(y.Z,{sx:{transform:n?"rotate(180deg)":"none"}})]})},children:(0,c.jsx)(p.Z,{sx:{gap:.5},children:e.submenu&&e.submenu.map(((e,s)=>(0,c.jsx)(m.Z,{children:(0,c.jsxs)(u.Z,{role:"menuitem",component:S.rU,to:e.link,children:[e.icon,(0,c.jsx)(j.Z,{children:(0,c.jsx)(Z.ZP,{level:"title-sm",children:e.label})})]})},s)))})}):(0,c.jsxs)(u.Z,{role:"menuitem",component:S.rU,to:e.link,children:[e.icon,(0,c.jsx)(j.Z,{children:(0,c.jsx)(Z.ZP,{level:"title-sm",children:e.label})})]})},s)))})]})}var M=n(303),I=n(2059),z=n(7750),A=n(6872),H=n(5966);const _=[{icon:(0,c.jsx)(I.Z,{}),label:"Dashboard",link:"/dashboard"},{icon:(0,c.jsx)(A.Z,{}),label:"Assigned To Me",link:"/assigned"},{icon:(0,c.jsx)(M.Z,{}),label:"All Cases",link:"/cases"},{icon:(0,c.jsx)(H.Z,{}),label:"Calendar",link:"/calendar"},{label:"Add a Case",icon:(0,c.jsx)(z.Z,{}),link:"/addCase"}];var N=n(6242),R=n(4934),G=n(7194),F=n(2788),B=n(872),E=n(9636),L=n(5945);const W={"New Cases":(0,c.jsx)(G.Z,{}),"Pending Cases":(0,c.jsx)(F.Z,{}),"Scheduled Cases":(0,c.jsx)(B.Z,{})};const O=function(){const[e,s]=(0,a.useState)("week"),[n,t]=(0,a.useState)([{title:"New Cases",count:0,change:"+0"},{title:"Pending Cases",count:0,change:"+0"},{title:"Scheduled Cases",count:0,change:"+0"}]);return(0,a.useEffect)((()=>{(async()=>{try{const s=new Date,n=new Date(s);"week"===e?n.setDate(s.getDate()-7):"month"===e?n.setMonth(s.getMonth()-1):"year"===e&&n.setFullYear(s.getFullYear()-1);const a=await P.pb.collection("cases").getFullList({filter:'created > "'+n.toISOString()+'" && status != "closed" '}),l=[{title:"New Cases",count:0,change:"+0"},{title:"Pending Cases",count:0,change:"+0"},{title:"Scheduled Cases",count:0,change:"+0"}];a.forEach((e=>{"new"===e.status?l[0].count+=1:"scheduled"===e.status?l[1].count+=1:"pending"===e.status&&(l[2].count+=1)})),t(l)}catch(s){console.log(s)}})()}),[e]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,mx:2},children:[(0,c.jsx)(Z.ZP,{level:"body-md",sx:{flexGrow:1},children:"Control and analyze your data in the easiest way"}),(0,c.jsxs)(L.Z,{value:e,onChange:(e,n)=>{null!==n&&s(n)},sx:{ml:2},children:[(0,c.jsx)(E.Z,{value:"week",children:"Week"}),(0,c.jsx)(E.Z,{value:"month",children:"Month"}),(0,c.jsx)(E.Z,{value:"year",children:"Year"})]})]}),(0,c.jsx)(x.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(3, 1fr)"},justifyContent:"center",gap:2,mt:12,padding:1},children:n.map((e=>(0,c.jsxs)(R.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:"22px",margin:"auto",width:"100%",maxWidth:{sm:290,xs:"100%"}},children:[(0,c.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"16px",boxSizing:"border-box"},children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:e.title}),W[e.title]]}),(0,c.jsx)(x.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"16px",boxSizing:"border-box"},children:(0,c.jsx)(Z.ZP,{level:"h4",sx:{fontWeight:"medium",fontSize:"2.25rem"},children:e.count})})]},e.title)))})]})};var U=n(3409),V=n(7230),K=n(8625),Y=n(520),q=n(981),J=n(8276),X=n(5403),Q=n(5397),$=n(1133),ee=n(3746);function se(e){let{patients:s}=e;const n=(0,D.s0)(),[t,i]=(0,a.useState)(1),[r,d]=(0,a.useState)([]),[h,p]=(0,a.useState)([]);(0,a.useEffect)((()=>{d(s)}),[s]),(0,a.useEffect)((()=>{const e=10*(t-1),s=10*t,n=r.slice(e,s);p(n)}),[r,t]);const m=e=>{i(e)};return(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(x.Z,{className:"SearchAndFilters-tabletUp",sx:{borderRadius:"sm",py:2,display:{xs:"none",sm:"flex"},flexWrap:"wrap",gap:1.5,"& > *":{minWidth:{xs:"120px",md:"160px"}}},children:(0,c.jsxs)(U.Z,{sx:{flex:1},size:"sm",children:[(0,c.jsx)(V.Z,{children:"Search for order"}),(0,c.jsx)(Y.ZP,{size:"sm",placeholder:"Search",startDecorator:(0,c.jsx)(X.Z,{}),onChange:e=>{const n=e.target.value.toLowerCase();if(""===n.trim())d(s);else{const e=s.filter((e=>e.name.toLowerCase().includes(n)||e.dob.toLowerCase().includes(n)||e.status.toLowerCase().includes(n)));d(e)}i(1)}})]})}),(0,c.jsx)(l.Z,{className:"OrderTableContainer",variant:"outlined",sx:{display:{xs:"none",sm:"initial"},width:"100%",borderRadius:"sm",flexShrink:1,overflow:"auto",minHeight:0},children:(0,c.jsxs)(q.Z,{"aria-labelledby":"tableTitle",stickyHeader:!0,hoverRow:!0,sx:{"--TableCell-headBackground":"var(--joy-palette-background-level1)","--Table-headerUnderlineThickness":"1px","--TableRow-hoverBackground":"var(--joy-palette-background-level1)","--TableCell-paddingY":"4px","--TableCell-paddingX":"8px"},children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:{width:180,padding:"12px 6px"},children:"ID"}),(0,c.jsx)("th",{style:{width:140,padding:"12px 6px"},children:"Name"}),(0,c.jsx)("th",{style:{width:140,padding:"12px 6px"},children:"Date of birth"}),(0,c.jsx)("th",{style:{width:140,padding:"12px 6px"},children:"Status"}),(0,c.jsx)("th",{style:{width:140,padding:"12px 6px"},children:"Actions"})]})}),(0,c.jsx)("tbody",{children:h&&h.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.id})}),(0,c.jsx)("td",{children:(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.name})}),(0,c.jsx)("td",{children:(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.dob})}),(0,c.jsx)("td",{children:(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.status})}),(0,c.jsx)("td",{children:(0,c.jsx)(x.Z,{sx:{display:"flex",gap:2,alignItems:"center"},children:(0,c.jsx)(K.Z,{level:"body-xs",component:"button",onClick:()=>{return s=e.id,void n("/cases/details/".concat(s));var s},children:(0,c.jsx)(o.ZP,{title:"Schedule",variant:"soft",color:"primary",size:"sm",children:(0,c.jsx)(ee.Z,{})})})})})]},e.id)))})]})}),(0,c.jsxs)(x.Z,{className:"Pagination-laptopUp",sx:{pt:2,gap:1,["& .".concat(J.Z.root)]:{borderRadius:"50%"},display:{xs:"none",md:"flex"}},children:[(0,c.jsx)(E.Z,{size:"sm",variant:"outlined",color:"neutral",startDecorator:(0,c.jsx)($.Z,{}),disabled:1===t,onClick:()=>m(t-1),children:"Previous"}),(0,c.jsx)(x.Z,{sx:{flex:1}}),Array.from({length:Math.ceil(r.length/10)}).map(((e,s)=>(0,c.jsx)(o.ZP,{size:"sm",variant:Number(s+1)?"outlined":"plain",color:"neutral",onClick:()=>m(s+1),children:s+1},s+1))),(0,c.jsx)(x.Z,{sx:{flex:1}}),(0,c.jsx)(E.Z,{size:"sm",variant:"outlined",color:"neutral",endDecorator:(0,c.jsx)(Q.Z,{}),disabled:t===Math.ceil(r.length/10),onClick:()=>m(t+1),children:"Next"})]})]})}function ne(e){const s=new Date(e),n=new Date;if(s.toDateString()===n.toDateString()){const e=Math.floor((n.getTime()-s.getTime())/1e3);if(e<60)return"".concat(e," seconds ago");const a=Math.floor(e/60);if(a<60)return"".concat(a," minutes ago");const t=Math.floor(a/60);return"".concat(t," hours ago")}return s.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}function ae(){const[e,s]=(0,a.useState)([]),n=e=>{if(!e)return"";return e.split(" ")[0]};(0,a.useEffect)((()=>{console.log("useEffect called"),(async()=>{const e=(await P.pb.collection("cases").getFullList({sort:"-created",requestKey:"null"})).map((e=>({...e,id:e.id,name:e.first_name+" "+e.last_name,dob:n(e.dob),status:e.status})));s(e)})()}),[]);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x.Z,{sx:{display:"flex",my:1,gap:1,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"start",sm:"center"},flexWrap:"wrap",justifyContent:"space-between"},children:(0,c.jsx)(Z.ZP,{level:"h2",children:"All Cases"})}),(0,c.jsx)(se,{patients:e})]})}var te=n(2622),le=n(2699),oe=n(9403),ie=n(9832),re=n(3757),de=n(4984),ce=n(3161),he=n(5535),xe=n(8662),pe=n(7239),me=n(2131),ue=n(4558),je=n(7145);const Ze=[{id:"INV-1234",date:"Feb 3, 2023",status:"Refunded",customer:{initial:"O",name:"Olivia Ryhe",email:"olivia@email.com"}},{id:"INV-1233",date:"Feb 3, 2023",status:"Paid",customer:{initial:"S",name:"Steve Hampton",email:"steve.hamp@email.com"}},{id:"INV-1232",date:"Feb 3, 2023",status:"Refunded",customer:{initial:"C",name:"Ciaran Murray",email:"ciaran.murray@email.com"}},{id:"INV-1231",date:"Feb 3, 2023",status:"Refunded",customer:{initial:"M",name:"Maria Macdonald",email:"maria.mc@email.com"}},{id:"INV-1230",date:"Feb 3, 2023",status:"Cancelled",customer:{initial:"C",name:"Charles Fulton",email:"fulton@email.com"}},{id:"INV-1229",date:"Feb 3, 2023",status:"Cancelled",customer:{initial:"J",name:"Jay Hooper",email:"hooper@email.com"}}];function ge(){return(0,c.jsxs)(xe.L,{children:[(0,c.jsx)(ce.Z,{slots:{root:o.ZP},slotProps:{root:{variant:"plain",color:"neutral",size:"sm"}},children:(0,c.jsx)(pe.Z,{})}),(0,c.jsxs)(de.Z,{size:"sm",sx:{minWidth:140},children:[(0,c.jsx)(he.Z,{children:"Edit"}),(0,c.jsx)(he.Z,{children:"Rename"}),(0,c.jsx)(he.Z,{children:"Move"}),(0,c.jsx)(oe.Z,{}),(0,c.jsx)(he.Z,{color:"danger",children:"Delete"})]})]})}function be(){return(0,c.jsxs)(x.Z,{sx:{display:{xs:"block",sm:"none"}},children:[Ze.map((e=>(0,c.jsxs)(p.Z,{size:"sm",sx:{"--ListItem-paddingX":0},children:[(0,c.jsxs)(m.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,c.jsxs)(j.Z,{sx:{display:"flex",gap:2,alignItems:"start"},children:[(0,c.jsx)(ie.Z,{children:(0,c.jsx)(te.Z,{size:"sm",children:e.customer.initial})}),(0,c.jsxs)("div",{children:[(0,c.jsx)(Z.ZP,{fontWeight:600,gutterBottom:!0,children:e.customer.name}),(0,c.jsx)(Z.ZP,{level:"body-xs",gutterBottom:!0,children:e.customer.email}),(0,c.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:.5,mb:1},children:[(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.date}),(0,c.jsx)(Z.ZP,{level:"body-xs",children:"\u2022"}),(0,c.jsx)(Z.ZP,{level:"body-xs",children:e.id})]}),(0,c.jsxs)(x.Z,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,c.jsx)(K.Z,{level:"body-sm",component:"button",children:"Download"}),(0,c.jsx)(ge,{})]})]})]}),(0,c.jsx)(le.Z,{variant:"soft",size:"sm",startDecorator:{Paid:(0,c.jsx)(me.Z,{}),Refunded:(0,c.jsx)(je.Z,{}),Cancelled:(0,c.jsx)(ue.Z,{})}[e.status],color:{Paid:"success",Refunded:"neutral",Cancelled:"danger"}[e.status],children:e.status})]}),(0,c.jsx)(re.Z,{})]},e.id))),(0,c.jsxs)(x.Z,{className:"Pagination-mobile",sx:{display:{xs:"flex",md:"none"},alignItems:"center",py:2},children:[(0,c.jsx)(o.ZP,{"aria-label":"previous page",variant:"outlined",color:"neutral",size:"sm",children:(0,c.jsx)($.Z,{})}),(0,c.jsx)(Z.ZP,{level:"body-sm",mx:"auto",children:"Page 1 of 10"}),(0,c.jsx)(o.ZP,{"aria-label":"next page",variant:"outlined",color:"neutral",size:"sm",children:(0,c.jsx)(Q.Z,{})})]})]})}var ye=n(253),fe=n(3629),ve=n(4565),we=n(7623),Ce=n(7482),Se=n(9098),Pe=n(8078);const De=e=>{var s;let{item:n=[]}=e;const t=(0,a.useMemo)((()=>{if(!n.start||!n.end)return"";const e=(0,we.Z)({start:new Date(n.start),end:new Date(n.end)});return(0,Ce.Z)(e,{format:["hours","minutes"]})}),[n]),l=null===n||void 0===n||null===(s=n.expand)||void 0===s?void 0:s.case;return(0,c.jsx)(S.rU,{to:"/cases/details/".concat(null===l||void 0===l?void 0:l.id),style:{textDecoration:"none",color:"inherit"},children:(0,c.jsxs)(R.Z,{children:[(0,c.jsxs)(ye.Z,{direction:"row",gap:1,justifyContent:"space-between",children:[(0,c.jsxs)(x.Z,{children:[(0,c.jsxs)(Z.ZP,{level:"h4",children:[null===l||void 0===l?void 0:l.first_name," ",null===l||void 0===l?void 0:l.last_name]}),(0,c.jsxs)(x.Z,{sx:{display:"flex",gap:1},children:[(0,c.jsx)(Z.ZP,{level:"body-sm",children:l.email}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:l.phone})]})]}),(0,c.jsxs)(x.Z,{sx:{textAlign:"right"},children:[(0,c.jsxs)(Z.ZP,{level:"body-sm",children:[(0,Se.Z)(new Date(n.start),"h:mm a")," - ",(0,Se.Z)(new Date(n.end),"h:mm a")]}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:t})]})]}),(0,c.jsxs)(x.Z,{children:[(0,c.jsxs)(Z.ZP,{level:"body-md",children:[n.procedures.length," procedures"]}),(0,c.jsx)(c.Fragment,{children:n.procedures.map((e=>(0,c.jsxs)(Z.ZP,{level:"body-sm",children:[e.name," ",e.laterality," ",e.site," ",e.cpt_code," "]})))})]}),(0,c.jsxs)(ye.Z,{direction:"row",gap:1,justifyContent:"space-between",children:[(0,c.jsx)(x.Z,{children:(0,c.jsxs)(Z.ZP,{level:"body-sm",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,c.jsx)(Pe.Z,{})," Anesthesia: ",n.anesthesia_type," ",n.anesthesia_position]})}),(0,c.jsx)(x.Z,{children:(0,c.jsx)(le.Z,{color:"primary",children:n.specialty})})]})]})})},Te=e=>{let{item:s=[]}=e;const n=s.expand.case;return(0,c.jsx)(S.rU,{to:"/cases/details/".concat(null===n||void 0===n?void 0:n.id),style:{textDecoration:"none",color:"inherit"},children:(0,c.jsx)(R.Z,{children:(0,c.jsx)(ye.Z,{direction:"row",gap:1,justifyContent:"space-between",children:(0,c.jsxs)(x.Z,{children:[(0,c.jsxs)(Z.ZP,{level:"h4",children:[null===n||void 0===n?void 0:n.first_name," ",null===n||void 0===n?void 0:n.last_name]}),(0,c.jsx)(x.Z,{sx:{display:"flex",gap:1},children:(0,c.jsxs)(Z.ZP,{level:"body-sm",children:["SSN: ",n.ssn]})}),(0,c.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,c.jsxs)(Z.ZP,{level:"body-sm",children:["Assigned At: ",(0,Se.Z)(new Date(s.created),"yyyy-MM-dd HH:mm:ss")]}),(0,c.jsxs)(Z.ZP,{level:"body-sm",children:["Task Note: ",s.meta.note]})]})]})})})})};function ke(){const[e,s]=a.useState(),[n,t]=a.useState(),[l,o]=a.useState(!1),[i,r]=a.useState({start:(0,fe.Z)(new Date).toISOString(),end:(0,ve.Z)(new Date).toISOString()});(0,a.useEffect)((()=>{var e,n,a;P.pb.authStore.model&&("Surgeon"===(null===(e=P.pb.authStore.model)||void 0===e?void 0:e.role)?(o(!0),P.pb.collection("schedule_items").getList(1,50,{filter:'user.id = "'.concat(null===(n=P.pb.authStore.model)||void 0===n?void 0:n.id,'" && type = "surgery"'),expand:"case,procedures"}).then((e=>{s(e)})).catch((e=>{console.error(e)}))):P.pb.collection("case_activity_item").getFullList({filter:'assigned_to = "'.concat(null===(a=P.pb.authStore.model)||void 0===a?void 0:a.id,'" '),expand:"case"}).then((e=>{t(e)})).catch((e=>{console.error(e)})))}),[]);const d=(0,a.useMemo)((()=>e?Array.from(e.items):[]),[e]);return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(ye.Z,{sx:{gap:2,maxWidth:600,alignItems:{xs:"stretch",sm:"stretch"}},children:[(0,c.jsx)(ye.Z,{direction:"row",gap:1,justifyContent:"space-between",children:(0,c.jsx)(Z.ZP,{level:"h2",children:"Assigned To You"})}),l?d.map((e=>(0,c.jsx)(De,{item:e}))):n&&n.map((e=>(0,c.jsx)(Te,{item:e}))),(0,c.jsx)(be,{})]})})}var Me=n(2552),Ie=n(1379),ze=n(7143),Ae=n(1076),He=n(4186),_e=n(202),Ne=n(1821),Re=n(7541),Ge=n(3051),Fe=n(8274),Be=n(9387),Ee=n(7402),Le=n(5948);function We(e){let{sx:s,...n}=e;return(0,c.jsxs)(U.Z,{...n,sx:[{display:{sm:"contents"}},...Array.isArray(s)?s:[s]],children:[(0,c.jsx)(V.Z,{children:"Country"}),(0,c.jsx)(Ee.Z,{size:"sm",autoHighlight:!0,isOptionEqualToValue:(e,s)=>e.code===s.code,defaultValue:{code:"TH",label:"Thailand",phone:"66"},options:Oe,renderOption:(e,s)=>(0,c.jsxs)(Le.Z,{...e,children:[(0,c.jsx)(ie.Z,{children:(0,c.jsx)(Me.Z,{ratio:"1",sx:{minWidth:20,borderRadius:"50%"},children:(0,c.jsx)("img",{loading:"lazy",width:"20",srcSet:"https://flagcdn.com/w40/".concat(s.code.toLowerCase(),".png 2x"),src:"https://flagcdn.com/w20/".concat(s.code.toLowerCase(),".png"),alt:""})})}),s.label,(0,c.jsxs)(Z.ZP,{component:"span",textColor:"text.tertiary",ml:.5,children:["(+",s.phone,")"]})]}),slotProps:{input:{autoComplete:"new-password"}}})]})}const Oe=[{code:"AD",label:"Andorra",phone:"376"},{code:"AE",label:"United Arab Emirates",phone:"971"},{code:"AF",label:"Afghanistan",phone:"93"},{code:"AG",label:"Antigua and Barbuda",phone:"1-268"},{code:"AI",label:"Anguilla",phone:"1-264"},{code:"AL",label:"Albania",phone:"355"},{code:"AM",label:"Armenia",phone:"374"},{code:"AO",label:"Angola",phone:"244"},{code:"AQ",label:"Antarctica",phone:"672"},{code:"AR",label:"Argentina",phone:"54"},{code:"AS",label:"American Samoa",phone:"1-684"},{code:"AT",label:"Austria",phone:"43"},{code:"AU",label:"Australia",phone:"61",suggested:!0},{code:"AW",label:"Aruba",phone:"297"},{code:"AX",label:"Alland Islands",phone:"358"},{code:"AZ",label:"Azerbaijan",phone:"994"},{code:"BA",label:"Bosnia and Herzegovina",phone:"387"},{code:"BB",label:"Barbados",phone:"1-246"},{code:"BD",label:"Bangladesh",phone:"880"},{code:"BE",label:"Belgium",phone:"32"},{code:"BF",label:"Burkina Faso",phone:"226"},{code:"BG",label:"Bulgaria",phone:"359"},{code:"BH",label:"Bahrain",phone:"973"},{code:"BI",label:"Burundi",phone:"257"},{code:"BJ",label:"Benin",phone:"229"},{code:"BL",label:"Saint Barthelemy",phone:"590"},{code:"BM",label:"Bermuda",phone:"1-441"},{code:"BN",label:"Brunei Darussalam",phone:"673"},{code:"BO",label:"Bolivia",phone:"591"},{code:"BR",label:"Brazil",phone:"55"},{code:"BS",label:"Bahamas",phone:"1-242"},{code:"BT",label:"Bhutan",phone:"975"},{code:"BV",label:"Bouvet Island",phone:"47"},{code:"BW",label:"Botswana",phone:"267"},{code:"BY",label:"Belarus",phone:"375"},{code:"BZ",label:"Belize",phone:"501"},{code:"CA",label:"Canada",phone:"1",suggested:!0},{code:"CC",label:"Cocos (Keeling) Islands",phone:"61"},{code:"CD",label:"Congo, Democratic Republic of the",phone:"243"},{code:"CF",label:"Central African Republic",phone:"236"},{code:"CG",label:"Congo, Republic of the",phone:"242"},{code:"CH",label:"Switzerland",phone:"41"},{code:"CI",label:"Cote d'Ivoire",phone:"225"},{code:"CK",label:"Cook Islands",phone:"682"},{code:"CL",label:"Chile",phone:"56"},{code:"CM",label:"Cameroon",phone:"237"},{code:"CN",label:"China",phone:"86"},{code:"CO",label:"Colombia",phone:"57"},{code:"CR",label:"Costa Rica",phone:"506"},{code:"CU",label:"Cuba",phone:"53"},{code:"CV",label:"Cape Verde",phone:"238"},{code:"CW",label:"Curacao",phone:"599"},{code:"CX",label:"Christmas Island",phone:"61"},{code:"CY",label:"Cyprus",phone:"357"},{code:"CZ",label:"Czech Republic",phone:"420"},{code:"DE",label:"Germany",phone:"49",suggested:!0},{code:"DJ",label:"Djibouti",phone:"253"},{code:"DK",label:"Denmark",phone:"45"},{code:"DM",label:"Dominica",phone:"1-767"},{code:"DO",label:"Dominican Republic",phone:"1-809"},{code:"DZ",label:"Algeria",phone:"213"},{code:"EC",label:"Ecuador",phone:"593"},{code:"EE",label:"Estonia",phone:"372"},{code:"EG",label:"Egypt",phone:"20"},{code:"EH",label:"Western Sahara",phone:"212"},{code:"ER",label:"Eritrea",phone:"291"},{code:"ES",label:"Spain",phone:"34"},{code:"ET",label:"Ethiopia",phone:"251"},{code:"FI",label:"Finland",phone:"358"},{code:"FJ",label:"Fiji",phone:"679"},{code:"FK",label:"Falkland Islands (Malvinas)",phone:"500"},{code:"FM",label:"Micronesia, Federated States of",phone:"691"},{code:"FO",label:"Faroe Islands",phone:"298"},{code:"FR",label:"France",phone:"33",suggested:!0},{code:"GA",label:"Gabon",phone:"241"},{code:"GB",label:"United Kingdom",phone:"44"},{code:"GD",label:"Grenada",phone:"1-473"},{code:"GE",label:"Georgia",phone:"995"},{code:"GF",label:"French Guiana",phone:"594"},{code:"GG",label:"Guernsey",phone:"44"},{code:"GH",label:"Ghana",phone:"233"},{code:"GI",label:"Gibraltar",phone:"350"},{code:"GL",label:"Greenland",phone:"299"},{code:"GM",label:"Gambia",phone:"220"},{code:"GN",label:"Guinea",phone:"224"},{code:"GP",label:"Guadeloupe",phone:"590"},{code:"GQ",label:"Equatorial Guinea",phone:"240"},{code:"GR",label:"Greece",phone:"30"},{code:"GS",label:"South Georgia and the South Sandwich Islands",phone:"500"},{code:"GT",label:"Guatemala",phone:"502"},{code:"GU",label:"Guam",phone:"1-671"},{code:"GW",label:"Guinea-Bissau",phone:"245"},{code:"GY",label:"Guyana",phone:"592"},{code:"HK",label:"Hong Kong",phone:"852"},{code:"HM",label:"Heard Island and McDonald Islands",phone:"672"},{code:"HN",label:"Honduras",phone:"504"},{code:"HR",label:"Croatia",phone:"385"},{code:"HT",label:"Haiti",phone:"509"},{code:"HU",label:"Hungary",phone:"36"},{code:"ID",label:"Indonesia",phone:"62"},{code:"IE",label:"Ireland",phone:"353"},{code:"IL",label:"Israel",phone:"972"},{code:"IM",label:"Isle of Man",phone:"44"},{code:"IN",label:"India",phone:"91"},{code:"IO",label:"British Indian Ocean Territory",phone:"246"},{code:"IQ",label:"Iraq",phone:"964"},{code:"IR",label:"Iran, Islamic Republic of",phone:"98"},{code:"IS",label:"Iceland",phone:"354"},{code:"IT",label:"Italy",phone:"39"},{code:"JE",label:"Jersey",phone:"44"},{code:"JM",label:"Jamaica",phone:"1-876"},{code:"JO",label:"Jordan",phone:"962"},{code:"JP",label:"Japan",phone:"81",suggested:!0},{code:"KE",label:"Kenya",phone:"254"},{code:"KG",label:"Kyrgyzstan",phone:"996"},{code:"KH",label:"Cambodia",phone:"855"},{code:"KI",label:"Kiribati",phone:"686"},{code:"KM",label:"Comoros",phone:"269"},{code:"KN",label:"Saint Kitts and Nevis",phone:"1-869"},{code:"KP",label:"Korea, Democratic People's Republic of",phone:"850"},{code:"KR",label:"Korea, Republic of",phone:"82"},{code:"KW",label:"Kuwait",phone:"965"},{code:"KY",label:"Cayman Islands",phone:"1-345"},{code:"KZ",label:"Kazakhstan",phone:"7"},{code:"LA",label:"Lao People's Democratic Republic",phone:"856"},{code:"LB",label:"Lebanon",phone:"961"},{code:"LC",label:"Saint Lucia",phone:"1-758"},{code:"LI",label:"Liechtenstein",phone:"423"},{code:"LK",label:"Sri Lanka",phone:"94"},{code:"LR",label:"Liberia",phone:"231"},{code:"LS",label:"Lesotho",phone:"266"},{code:"LT",label:"Lithuania",phone:"370"},{code:"LU",label:"Luxembourg",phone:"352"},{code:"LV",label:"Latvia",phone:"371"},{code:"LY",label:"Libya",phone:"218"},{code:"MA",label:"Morocco",phone:"212"},{code:"MC",label:"Monaco",phone:"377"},{code:"MD",label:"Moldova, Republic of",phone:"373"},{code:"ME",label:"Montenegro",phone:"382"},{code:"MF",label:"Saint Martin (French part)",phone:"590"},{code:"MG",label:"Madagascar",phone:"261"},{code:"MH",label:"Marshall Islands",phone:"692"},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",phone:"389"},{code:"ML",label:"Mali",phone:"223"},{code:"MM",label:"Myanmar",phone:"95"},{code:"MN",label:"Mongolia",phone:"976"},{code:"MO",label:"Macao",phone:"853"},{code:"MP",label:"Northern Mariana Islands",phone:"1-670"},{code:"MQ",label:"Martinique",phone:"596"},{code:"MR",label:"Mauritania",phone:"222"},{code:"MS",label:"Montserrat",phone:"1-664"},{code:"MT",label:"Malta",phone:"356"},{code:"MU",label:"Mauritius",phone:"230"},{code:"MV",label:"Maldives",phone:"960"},{code:"MW",label:"Malawi",phone:"265"},{code:"MX",label:"Mexico",phone:"52"},{code:"MY",label:"Malaysia",phone:"60"},{code:"MZ",label:"Mozambique",phone:"258"},{code:"NA",label:"Namibia",phone:"264"},{code:"NC",label:"New Caledonia",phone:"687"},{code:"NE",label:"Niger",phone:"227"},{code:"NF",label:"Norfolk Island",phone:"672"},{code:"NG",label:"Nigeria",phone:"234"},{code:"NI",label:"Nicaragua",phone:"505"},{code:"NL",label:"Netherlands",phone:"31"},{code:"NO",label:"Norway",phone:"47"},{code:"NP",label:"Nepal",phone:"977"},{code:"NR",label:"Nauru",phone:"674"},{code:"NU",label:"Niue",phone:"683"},{code:"NZ",label:"New Zealand",phone:"64"},{code:"OM",label:"Oman",phone:"968"},{code:"PA",label:"Panama",phone:"507"},{code:"PE",label:"Peru",phone:"51"},{code:"PF",label:"French Polynesia",phone:"689"},{code:"PG",label:"Papua New Guinea",phone:"675"},{code:"PH",label:"Philippines",phone:"63"},{code:"PK",label:"Pakistan",phone:"92"},{code:"PL",label:"Poland",phone:"48"},{code:"PM",label:"Saint Pierre and Miquelon",phone:"508"},{code:"PN",label:"Pitcairn",phone:"870"},{code:"PR",label:"Puerto Rico",phone:"1"},{code:"PS",label:"Palestine, State of",phone:"970"},{code:"PT",label:"Portugal",phone:"351"},{code:"PW",label:"Palau",phone:"680"},{code:"PY",label:"Paraguay",phone:"595"},{code:"QA",label:"Qatar",phone:"974"},{code:"RE",label:"Reunion",phone:"262"},{code:"RO",label:"Romania",phone:"40"},{code:"RS",label:"Serbia",phone:"381"},{code:"RU",label:"Russian Federation",phone:"7"},{code:"RW",label:"Rwanda",phone:"250"},{code:"SA",label:"Saudi Arabia",phone:"966"},{code:"SB",label:"Solomon Islands",phone:"677"},{code:"SC",label:"Seychelles",phone:"248"},{code:"SD",label:"Sudan",phone:"249"},{code:"SE",label:"Sweden",phone:"46"},{code:"SG",label:"Singapore",phone:"65"},{code:"SH",label:"Saint Helena",phone:"290"},{code:"SI",label:"Slovenia",phone:"386"},{code:"SJ",label:"Svalbard and Jan Mayen",phone:"47"},{code:"SK",label:"Slovakia",phone:"421"},{code:"SL",label:"Sierra Leone",phone:"232"},{code:"SM",label:"San Marino",phone:"378"},{code:"SN",label:"Senegal",phone:"221"},{code:"SO",label:"Somalia",phone:"252"},{code:"SR",label:"Suriname",phone:"597"},{code:"SS",label:"South Sudan",phone:"211"},{code:"ST",label:"Sao Tome and Principe",phone:"239"},{code:"SV",label:"El Salvador",phone:"503"},{code:"SX",label:"Sint Maarten (Dutch part)",phone:"1-721"},{code:"SY",label:"Syrian Arab Republic",phone:"963"},{code:"SZ",label:"Swaziland",phone:"268"},{code:"TC",label:"Turks and Caicos Islands",phone:"1-649"},{code:"TD",label:"Chad",phone:"235"},{code:"TF",label:"French Southern Territories",phone:"262"},{code:"TG",label:"Togo",phone:"228"},{code:"TH",label:"Thailand",phone:"66"},{code:"TJ",label:"Tajikistan",phone:"992"},{code:"TK",label:"Tokelau",phone:"690"},{code:"TL",label:"Timor-Leste",phone:"670"},{code:"TM",label:"Turkmenistan",phone:"993"},{code:"TN",label:"Tunisia",phone:"216"},{code:"TO",label:"Tonga",phone:"676"},{code:"TR",label:"Turkey",phone:"90"},{code:"TT",label:"Trinidad and Tobago",phone:"1-868"},{code:"TV",label:"Tuvalu",phone:"688"},{code:"TW",label:"Taiwan",phone:"886"},{code:"TZ",label:"United Republic of Tanzania",phone:"255"},{code:"UA",label:"Ukraine",phone:"380"},{code:"UG",label:"Uganda",phone:"256"},{code:"US",label:"United States",phone:"1",suggested:!0},{code:"UY",label:"Uruguay",phone:"598"},{code:"UZ",label:"Uzbekistan",phone:"998"},{code:"VA",label:"Holy See (Vatican City State)",phone:"379"},{code:"VC",label:"Saint Vincent and the Grenadines",phone:"1-784"},{code:"VE",label:"Venezuela",phone:"58"},{code:"VG",label:"British Virgin Islands",phone:"1-284"},{code:"VI",label:"US Virgin Islands",phone:"1-340"},{code:"VN",label:"Vietnam",phone:"84"},{code:"VU",label:"Vanuatu",phone:"678"},{code:"WF",label:"Wallis and Futuna",phone:"681"},{code:"WS",label:"Samoa",phone:"685"},{code:"XK",label:"Kosovo",phone:"383"},{code:"YE",label:"Yemen",phone:"967"},{code:"YT",label:"Mayotte",phone:"262"},{code:"ZA",label:"South Africa",phone:"27"},{code:"ZM",label:"Zambia",phone:"260"},{code:"ZW",label:"Zimbabwe",phone:"263"}];var Ue=n(3229),Ve=n(5518),Ke=n(5901),Ye=n(813);const qe=n.p+"static/media/default-pic.f030556996f46713a742.jpg";function Je(){const e=(0,D.UO)().id,[s,n]=a.useState({}),[t,l]=a.useState(!1),[i,r]=(0,a.useState)(!1);a.useEffect((()=>{(async e=>{try{const s=await P.pb.collection("cases").getOne(e);n(s)}catch(s){console.error("Error fetching case data:",s)}})(e)}),[e]);const d=e=>{const{name:s,value:a}=e.target;n((e=>({...e,[s]:a})))};a.useEffect((()=>{console.log(s)}),[s]);return(0,c.jsxs)(x.Z,{sx:{flex:1,width:"100%"},children:[(0,c.jsx)(x.Z,{sx:{position:"sticky",top:{sm:-100,md:-110},bgcolor:"background.body",zIndex:9995},children:(0,c.jsx)(x.Z,{sx:{px:{xs:2,md:6}},children:(0,c.jsx)(Z.ZP,{level:"h2",sx:{mt:1,mb:2},children:"Case Details"})})}),(0,c.jsx)(ye.Z,{spacing:4,sx:{display:"flex",maxWidth:"800px",mx:"auto",px:{xs:2,md:6},py:{xs:2,md:3}},children:(0,c.jsxs)(R.Z,{children:[(0,c.jsxs)(x.Z,{sx:{mb:1,display:"flex",justifyContent:"space-between"},children:[(0,c.jsxs)(x.Z,{children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"Case Information"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"Enter details about the case in the fields below."})]}),(0,c.jsx)(E.Z,{size:"sm",variant:"outlined",color:"primary",onClick:()=>{l((e=>!e))},children:t?(0,c.jsx)(Ye.Z,{}):(0,c.jsx)(Be.Z,{})})]}),(0,c.jsx)(oe.Z,{}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:3,sx:{display:{xs:"none",md:"flex"},my:1},children:[(0,c.jsx)(ye.Z,{direction:"column",spacing:1,children:(0,c.jsx)(Me.Z,{ratio:"1",maxHeight:200,sx:{flex:1,minWidth:120,borderRadius:"100%"},children:(0,c.jsx)("img",{src:qe,alt:""})})}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{flexGrow:1},children:[(0,c.jsxs)(ye.Z,{spacing:1,children:[(0,c.jsx)(V.Z,{children:"Name"}),(0,c.jsxs)(U.Z,{sx:{display:{sm:"flex-column",md:"flex-row"},gap:2},children:[(0,c.jsx)(Y.ZP,{size:"sm",name:"first_name",placeholder:"First name",value:s.first_name,disabled:!t,onChange:e=>{d(e)}}),(0,c.jsx)(Y.ZP,{size:"sm",name:"last_name",disabled:!t,placeholder:"Last name",value:s.last_name,sx:{flexGrow:1},onChange:e=>{d(e)}})]})]}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Phone"}),(0,c.jsx)(Y.ZP,{name:"phone_number",disabled:!t,onChange:e=>{d(e)},value:s.phone_number,startDecorator:(0,c.jsx)(Ue.Z,{}),size:"sm",placeholder:"+1234234234"})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Email"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",disabled:!t,value:s.email,startDecorator:(0,c.jsx)(Ge.Z,{}),name:"email",onChange:e=>{d(e)},placeholder:"johndoe@test.com",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"SSN"}),(0,c.jsx)(Y.ZP,{name:"ssn",startDecorator:(0,c.jsx)(Ve.Z,{}),value:s.ssn,disabled:!t,size:"sm",placeholder:"1234234234",onChange:e=>{d(e)}})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Address"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",disabled:!t,startDecorator:(0,c.jsx)(Re.Z,{}),placeholder:"St. Address, City, State, Zip Code",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Sex"}),(0,c.jsxs)(Ae.Z,{name:"sex",value:s.sex,disabled:!t,onChange:e=>{d(e)},placeholder:"Male/Female",required:!0,size:"sm",sx:{minWidth:200},children:[(0,c.jsx)(He.Z,{value:"male",children:"Male"}),(0,c.jsx)(He.Z,{value:"female",children:"Female"}),(0,c.jsx)(He.Z,{value:"other",children:"Other"})]})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Facility"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",disabled:!t,startDecorator:(0,c.jsx)(Ke.Z,{}),placeholder:"St. Address, City, State, Zip Code"})]})]}),(0,c.jsx)(ye.Z,{direction:"row",spacing:5,children:(0,c.jsxs)(U.Z,{size:"md",children:[(0,c.jsx)(V.Z,{children:"Date of Birth"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"date",disabled:!t,value:s.dob instanceof Date?s.dob.toISOString().split("T")[0]:"",name:"dob",onChange:e=>{d(e)},slotProps:{input:{max:(new Date).toISOString().split("T")[0]}}})]})})]})]}),(0,c.jsxs)(ye.Z,{direction:"column",spacing:2,sx:{display:{xs:"flex",md:"none"},my:1},children:[(0,c.jsxs)(ye.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(ye.Z,{direction:"column",spacing:1,children:[(0,c.jsx)(Me.Z,{ratio:"1",maxHeight:108,sx:{flex:1,minWidth:108,borderRadius:"100%"},children:(0,c.jsx)("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=286",srcSet:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=286&dpr=2 2x",loading:"lazy",alt:""})}),(0,c.jsx)(o.ZP,{"aria-label":"upload new picture",size:"sm",variant:"outlined",color:"neutral",sx:{bgcolor:"background.body",position:"absolute",zIndex:2,borderRadius:"50%",left:85,top:180,boxShadow:"sm"},children:(0,c.jsx)(Be.Z,{})})]}),(0,c.jsxs)(ye.Z,{spacing:1,sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Name"}),(0,c.jsxs)(U.Z,{sx:{display:{sm:"flex-column",md:"flex-row"},gap:2},children:[(0,c.jsx)(Y.ZP,{size:"sm",placeholder:"First name"}),(0,c.jsx)(Y.ZP,{size:"sm",placeholder:"Last name"})]})]})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Role"}),(0,c.jsx)(Y.ZP,{size:"sm",defaultValue:"UI Developer"})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Email"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",startDecorator:(0,c.jsx)(Ge.Z,{}),placeholder:"email",defaultValue:"siriwatk@test.com",sx:{flexGrow:1}})]}),(0,c.jsx)("div",{children:(0,c.jsx)(We,{})}),(0,c.jsx)("div",{children:(0,c.jsxs)(U.Z,{sx:{display:{sm:"contents"}},children:[(0,c.jsx)(V.Z,{children:"Timezone"}),(0,c.jsxs)(Ae.Z,{size:"sm",startDecorator:(0,c.jsx)(Fe.Z,{}),defaultValue:"1",children:[(0,c.jsxs)(He.Z,{value:"1",children:["Indochina Time (Bangkok)"," ",(0,c.jsx)(Z.ZP,{textColor:"text.tertiary",ml:.5,children:"\u2014 GMT+07:00"})]}),(0,c.jsxs)(He.Z,{value:"2",children:["Indochina Time (Ho Chi Minh City)"," ",(0,c.jsx)(Z.ZP,{textColor:"text.tertiary",ml:.5,children:"\u2014 GMT+07:00"})]})]})]})})]}),(0,c.jsxs)(x.Z,{sx:{mb:1,mt:3},children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"Procedure Description"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"Write description about the procedure in the field below."})]}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{my:1},children:[(0,c.jsx)(ze.Z,{disabled:!t,size:"sm",minRows:4,sx:{mt:1.5},placeholder:"Left 1st metatarsal- cuneiform fusion, modified McBride, Akin osteotomy, left 2nd digit hammer toe correction"}),(0,c.jsx)(Ie.Z,{sx:{mt:.75,fontSize:"xs"},children:"275 characters left"})]}),(0,c.jsxs)(x.Z,{sx:{mb:1,mt:3},children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"Insurance Details"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"Write description about the procedure in the field below."})]}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{my:1},children:[(0,c.jsx)(ze.Z,{disabled:!t,size:"sm",minRows:4,sx:{mt:1.5},placeholder:"Insurance company name, policy number, etc."}),(0,c.jsx)(Ie.Z,{sx:{mt:.75,fontSize:"xs"},children:"275 characters left"})]}),(0,c.jsx)(Ne.Z,{sx:{borderTop:"1px solid",borderColor:"divider"},children:(0,c.jsx)(_e.Z,{sx:{alignSelf:"flex-end",pt:2},children:t?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(E.Z,{size:"sm",variant:"outlined",color:"neutral",children:"Cancel"}),(0,c.jsx)(E.Z,{size:"sm",variant:"solid",onClick:async n=>{n.preventDefault(),console.log(s),(async e=>{try{await P.pb.collection("cases").update(e,s),console.log("Case updated successfully!")}catch(n){console.error("Error updating case:",n)}})(e)},children:"Save"})]}):(0,c.jsxs)(x.Z,{sx:{display:"none"},children:[(0,c.jsx)(E.Z,{size:"sm",variant:"outlined",color:"neutral",children:"Cancel"}),(0,c.jsx)(E.Z,{size:"sm",variant:"solid",children:"Save"})]})})})]})})]})}var Xe=n(1612),Qe=n(8095),$e=n(9823);function es(){const e=(0,D.s0)(),[s,n]=(0,a.useState)({procedure_details:[],status:"new"}),t=e=>{if(console.log(e),"dob"===e.target.name){const a=new Date(e.target.value);n({...s,[e.target.name]:a})}else n({...s,[e.target.name]:e.target.value})},[l,i]=(0,a.useState)(!1),[r,d]=(0,a.useState)(""),[h,p]=(0,a.useState)("");return(0,c.jsxs)(x.Z,{sx:{flex:1,width:"100%"},children:[(0,c.jsx)(x.Z,{sx:{position:"sticky",top:{sm:-100,md:-110},bgcolor:"background.body",zIndex:9995},children:(0,c.jsx)(x.Z,{sx:{px:{xs:2,md:6}},children:(0,c.jsx)(Z.ZP,{level:"h2",sx:{mt:1,mb:2},children:"Add a new case"})})}),(0,c.jsx)(ye.Z,{spacing:4,sx:{display:"flex",maxWidth:"800px",mx:"auto",px:{xs:2,md:6},py:{xs:2,md:3}},children:(0,c.jsxs)(R.Z,{children:[(0,c.jsxs)(x.Z,{sx:{mb:1},children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"Case Information"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"Enter details about the case in the fields below."})]}),(0,c.jsx)(oe.Z,{}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:3,sx:{display:{xs:"none",md:"flex"},my:1},children:[(0,c.jsx)(ye.Z,{direction:"column",spacing:1,children:(0,c.jsx)(Me.Z,{ratio:"1",maxHeight:200,sx:{flex:1,minWidth:120,borderRadius:"100%"},children:(0,c.jsx)("img",{src:qe,loading:"lazy",alt:""})})}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{flexGrow:1},children:[(0,c.jsxs)(ye.Z,{spacing:1,children:[(0,c.jsx)(V.Z,{children:"Name"}),(0,c.jsxs)(U.Z,{sx:{width:"90%",display:{sm:"flex-column",md:"flex-row"},gap:2},children:[(0,c.jsx)(Y.ZP,{size:"sm",name:"first_name",placeholder:"First name",onChange:e=>{t(e)}}),(0,c.jsx)(Y.ZP,{size:"sm",name:"last_name",placeholder:"Last name",sx:{flexGrow:1},onChange:e=>{t(e)}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"90%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Phone"}),(0,c.jsx)(Y.ZP,{name:"phone_number",onChange:e=>{t(e)},startDecorator:(0,c.jsx)(Ue.Z,{}),size:"sm",placeholder:"+1234234234"})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Email"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",startDecorator:(0,c.jsx)(Ge.Z,{}),name:"email",onChange:e=>{t(e)},placeholder:"johndoe@test.com",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"90%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"SSN"}),(0,c.jsx)(Y.ZP,{name:"ssn",startDecorator:(0,c.jsx)(Ve.Z,{}),size:"sm",placeholder:"1234234234",onChange:e=>{t(e)}})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Address"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"text",startDecorator:(0,c.jsx)(Re.Z,{}),placeholder:"St. Address, City, State, Zip Code",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"95%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Sex"}),(0,c.jsxs)(Ae.Z,{name:"sex",onChange:e=>{t(e)},placeholder:"Male/Female",required:!0,size:"sm",sx:{minWidth:200},children:[(0,c.jsx)(He.Z,{value:"male",children:"Male"}),(0,c.jsx)(He.Z,{value:"female",children:"Female"}),(0,c.jsx)(He.Z,{value:"other",children:"Other"})]})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Facility"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"text",startDecorator:(0,c.jsx)(Ke.Z,{}),placeholder:"St. Address, City, State, Zip Code"})]})]}),(0,c.jsx)(ye.Z,{direction:"row",spacing:5,children:(0,c.jsxs)(U.Z,{size:"md",children:[(0,c.jsx)(V.Z,{children:"Date of Birth"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"date",name:"dob",onChange:e=>{t(e)},slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}}})]})})]})]}),(0,c.jsx)(ye.Z,{direction:"column",spacing:2,sx:{display:{xs:"flex",md:"none"},my:1},children:(0,c.jsxs)(ye.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(ye.Z,{direction:"column",spacing:1,children:[(0,c.jsx)(Me.Z,{ratio:"1",maxHeight:108,sx:{flex:1,minWidth:108,borderRadius:"100%"},children:(0,c.jsx)("img",{src:qe,srcSet:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?auto=format&fit=crop&w=286&dpr=2 2x",loading:"lazy",alt:""})}),(0,c.jsx)(o.ZP,{"aria-label":"upload new picture",size:"sm",variant:"outlined",color:"neutral",sx:{bgcolor:"background.body",position:"absolute",zIndex:2,borderRadius:"50%",left:85,top:180,boxShadow:"sm"},children:(0,c.jsx)(Be.Z,{})})]}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{flexGrow:1},children:[(0,c.jsxs)(ye.Z,{spacing:1,children:[(0,c.jsx)(V.Z,{children:"Name"}),(0,c.jsxs)(U.Z,{sx:{width:"90%",display:{sm:"flex-column",md:"flex-row"},gap:2},children:[(0,c.jsx)(Y.ZP,{size:"sm",name:"first_name",placeholder:"First name",onChange:e=>{t(e)}}),(0,c.jsx)(Y.ZP,{size:"sm",name:"last_name",placeholder:"Last name",sx:{flexGrow:1},onChange:e=>{t(e)}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"90%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Phone"}),(0,c.jsx)(Y.ZP,{name:"phone_number",onChange:e=>{t(e)},startDecorator:(0,c.jsx)(Ue.Z,{}),size:"sm",placeholder:"+1234234234"})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Email"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"email",startDecorator:(0,c.jsx)(Ge.Z,{}),name:"email",onChange:e=>{t(e)},placeholder:"johndoe@test.com",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"90%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"SSN"}),(0,c.jsx)(Y.ZP,{name:"ssn",startDecorator:(0,c.jsx)(Ve.Z,{}),size:"sm",placeholder:"1234234234",onChange:e=>{t(e)}})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Address"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"text",startDecorator:(0,c.jsx)(Re.Z,{}),placeholder:"St. Address, City, State, Zip Code",sx:{flexGrow:1}})]})]}),(0,c.jsxs)(ye.Z,{sx:{width:"95%"},direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Sex"}),(0,c.jsxs)(Ae.Z,{name:"sex",onChange:e=>{t(e)},placeholder:"Male/Female",required:!0,size:"sm",sx:{minWidth:200},children:[(0,c.jsx)(He.Z,{value:"male",children:"Male"}),(0,c.jsx)(He.Z,{value:"female",children:"Female"}),(0,c.jsx)(He.Z,{value:"other",children:"Other"})]})]}),(0,c.jsxs)(U.Z,{sx:{flexGrow:1},children:[(0,c.jsx)(V.Z,{children:"Facility"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"text",startDecorator:(0,c.jsx)(Ke.Z,{}),placeholder:"St. Address, City, State, Zip Code"})]})]}),(0,c.jsx)(ye.Z,{direction:"row",spacing:5,children:(0,c.jsxs)(U.Z,{size:"md",children:[(0,c.jsx)(V.Z,{children:"Date of Birth"}),(0,c.jsx)(Y.ZP,{size:"sm",type:"date",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}}})]})}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:5,children:[(0,c.jsx)(Xe.Z,{label:"Surgery required",variant:"outlined",size:"sm",onChange:e=>{i(e.target.checked)},sx:{position:"relative",top:30}}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Surgeon Assigned"}),(0,c.jsx)(Y.ZP,{disabled:!l,size:"sm",type:"text",startDecorator:(0,c.jsx)(Qe.Z,{}),placeholder:"Dr.John Doe"})]})]}),(0,c.jsxs)(ye.Z,{direction:"row",spacing:4,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Procedure"}),(0,c.jsx)(Y.ZP,{sx:{width:"12rem"},disabled:!l,size:"sm",type:"text",value:r,onChange:e=>d(e.target.value),startDecorator:(0,c.jsx)(Qe.Z,{}),placeholder:"Skin Plasty"})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"CPT"}),(0,c.jsx)(Y.ZP,{sx:{width:"10rem"},disabled:!l,size:"sm",type:"text",value:h,onChange:e=>p(e.target.value),startDecorator:(0,c.jsx)(Qe.Z,{}),placeholder:"12345"})]}),(0,c.jsx)(E.Z,{sx:{height:"2rem",width:"3.5rem",position:"relative",top:"1.6rem"},size:"sm",variant:"solid",onClick:()=>{if(r&&h){const e=[...s.procedure_details,{procedure:r,cptCode:h}];n({...s,procedure_details:e}),d(""),p("")}},children:"add"})]}),s.procedure_details.map(((e,a)=>(0,c.jsx)(ye.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{border:"1px solid",borderColor:"primary.main",borderRadius:"4px",padding:"8px",marginTop:"8px"},children:(0,c.jsx)(o.ZP,{size:"sm",onClick:()=>(e=>{const a=[...s.procedure_details];a.splice(e,1),n({...s,procedure_details:a})})(a),children:(0,c.jsx)($e.Z,{})})},a)))]})]})}),(0,c.jsxs)(x.Z,{sx:{mb:1,mt:3},children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"Initial Notes"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"Write description about the diagnosis in the field below."})]}),(0,c.jsxs)(ye.Z,{spacing:2,sx:{my:1},children:[(0,c.jsx)(ze.Z,{size:"sm",minRows:4,sx:{mt:1.5},name:"initial_note",onChange:e=>{t(e)},placeholder:"Left 1st metatarsal- cuneiform fusion, modified McBride, Akin osteotomy, left 2nd digit hammer toe correction"}),(0,c.jsx)(Ie.Z,{sx:{mt:.75,fontSize:"xs"},children:"275 characters left"})]}),(0,c.jsx)(Ne.Z,{sx:{borderTop:"1px solid",borderColor:"divider"},children:(0,c.jsx)(_e.Z,{sx:{alignSelf:"flex-end",pt:2},children:(0,c.jsx)(E.Z,{size:"sm",variant:"solid",onClick:n=>{(async n=>{n.preventDefault(),console.log(s);try{await P.pb.collection("cases").create(s),e("/cases")}catch(a){console.log(a)}})(n)},children:"Save"})})})]})})]})}var ss=n(8650),ns=n(8844),as=n(7282),ts=n(7511),ls=n(645),os=n(4691);const is=e=>{let{surgeryDetails:s,surgeryDetail:n}=e;return(0,c.jsx)(x.Z,{sx:{width:"90%",overflowY:"auto"},children:(0,c.jsxs)(ye.Z,{spacing:2,children:[(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"Start Time:"})," ",(0,Se.Z)(new Date(n.start),"yyyy-MM-dd HH:mm")]}),(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"End Time:"})," ",(0,Se.Z)(new Date(n.end),"yyyy-MM-dd HH:mm")]}),(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"Type:"})," ",n.type]}),(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"Anesthesia Type:"})," ",n.anesthesia_type]}),(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"Anesthesia Position:"})," ",n.anesthesia_position]}),(0,c.jsxs)(Z.ZP,{children:[(0,c.jsx)("strong",{children:"Specialty:"})," ",n.specialty]}),(0,c.jsx)(Z.ZP,{children:(0,c.jsx)("strong",{children:"Procedures:"})}),(0,c.jsx)(ye.Z,{spacing:1,sx:{marginLeft:"1.5em"},children:null===n||void 0===n?void 0:n.expand.procedures.map(((e,s)=>(0,c.jsxs)(Z.ZP,{children:[e.name," - CPT Code: ",e.cpt_code]},s)))})]})})};var rs=n(553),ds=n(1433),cs=n(8022),hs=n(7338),xs=n(9682),ps=n(5413),ms=n(7988),us=n(8393),js=n(2951),Zs=n(8857),gs=n(7831);const bs=e=>{let{case_activity_item:s}=e;return(0,c.jsx)(c.Fragment,{children:s?s.map(((e,s)=>{var n,a,t,l;return(0,c.jsxs)(cs.Z,{children:[(0,c.jsxs)(ms.Z,{children:[(0,c.jsxs)(te.Z,{color:"primary",children:["note"===e.type&&(0,c.jsx)(js.Z,{}),"action_required"===e.type&&(0,c.jsx)(gs.Z,{}),"attachment"===e.type&&(0,c.jsx)(us.Z,{}),"surgery_scheduled_added"===e.type&&(0,c.jsx)(Zs.Z,{})]}),(0,c.jsxs)(j.Z,{children:[(0,c.jsx)(Z.ZP,{level:"title-md",children:"action_required"==e.type?"Task":"Note"}),(0,c.jsx)(Z.ZP,{level:"body-sm",children:"note"===e.type||"action_required"==e.type&&(l=null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.note,l.split(" ").slice(0,5).join(" ")+"...")}),(null===e||void 0===e?void 0:e.assigned_to)&&e.expand&&(0,c.jsxs)(Z.ZP,{level:"body-xs",children:["Assigned to ",null===e||void 0===e||null===(a=e.expand)||void 0===a?void 0:a.assigned_to.name]})]}),(0,c.jsxs)(Z.ZP,{level:"body-sm",children:["  ".concat(ne(e.created))," "]})]}),(0,c.jsx)(xs.Z,{children:"note"===e.type&&(0,c.jsx)(Z.ZP,{level:"body-sm",children:null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.note})})]},s)})):(0,c.jsx)(Z.ZP,{level:"body-sm",children:"No Activity"})})};var ys=n(4865),fs=n(9962),vs=n(8971),ws=n(6772);const Cs=e=>{let{file:s}=e;const{id:n,attachment:a}=s,t=(e=>e.endsWith(".pdf")?fs.Z:e.endsWith(".xlsx")?vs.Z:ws.Z)(a),l=(e=>{let s=e.split("_")[0];s=s.charAt(0).toUpperCase()+s.slice(1);return s+e.substring(e.lastIndexOf("."))})(a),o=(e=>{const s=e.match(/(?<=\.)\w+$/);return s?s[0].toUpperCase():"UNKNOWN"})(a);return(0,c.jsxs)(R.Z,{variant:"outlined",sx:{width:"280",display:"flex",flexDirection:"row",alignItems:"center",padding:1,boxShadow:"0 2px 4px rgba(0,0,0,0.1)","&:hover":{boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},onClick:async()=>{const e="http://127.0.0.1:8090/api/files/attachments/".concat(n,"/").concat(encodeURIComponent(a));try{const s=await fetch(e),n=await s.blob(),t=window.URL.createObjectURL(n),l=document.createElement("a");l.href=t,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(t)}catch(s){console.error(s)}},children:[(0,c.jsx)(t,{sx:{fontSize:"40px"}}),(0,c.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,c.jsx)(Z.ZP,{level:"body-md",fontWeight:"bold",children:l}),(0,c.jsxs)(Z.ZP,{level:"body-sm",children:["2.5 MB ",o]})]})]})},Ss=e=>{let{open:s,setOpen:n,caseId:t,type:l}=e;const[o,i]=(0,a.useState)({note:"",description:"Surgeons may perform procedures such as bunion removal, hammertoe correction, or ligament repairs to enhance mobility and diminish discomfort. With advancements in surgical techniques and technology, foot surgeries aim to optimize recovery, allowing patients to regain their stride with improved comfort and overall foot health."});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(Z.ZP,{level:"title-md",sx:{mt:2},children:"Consent Form"}),(0,c.jsx)(E.Z,{onClick:()=>n(!1),size:"sm",children:(0,c.jsx)($e.Z,{})})]}),(0,c.jsx)(oe.Z,{}),(0,c.jsxs)(ye.Z,{spacing:2,marginTop:{xs:2,md:4},children:[(0,c.jsxs)(ye.Z,{direction:{xs:"column",md:"row"},spacing:2,sx:{display:"flex"},children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Patient Name"}),(0,c.jsx)(Y.ZP,{variant:"soft",type:"text",disabled:!0})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Surgery  Date"}),(0,c.jsx)(Y.ZP,{type:"date"})]})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"  Surgery Details"}),(0,c.jsx)(ze.Z,{disabled:!0,value:o.description})]})]})]})},Ps=e=>{let{caseId:s}=e;const[n,t]=(0,a.useState)([]);(0,a.useEffect)((()=>{i(s)}),[s]);const[l,o]=a.useState(!1),i=async e=>{try{const s=(await P.pb.collection("attachments").getList(1,50,{filter:"case='".concat(e,"'")})).items.map((e=>({id:e.id,attachment:e.attachment,created:e.created,updated:e.updated,case:e.case})));t(s)}catch(s){console.error(s)}};return(0,c.jsxs)(x.Z,{sx:{maxWidth:"90%",margin:"auto"},children:[(0,c.jsxs)(x.Z,{sx:{display:"flex",justifyContent:"flex-end",padding:2},children:[(0,c.jsx)("label",{htmlFor:"raised-button-file",children:(0,c.jsx)(E.Z,{onClick:()=>o(!0),sx:{borderRadius:"16px",padding:"6px 12px",marginX:2,fontSize:"0.75rem","&:hover":{backgroundColor:"#333333"}},children:"Consent Form"})}),(0,c.jsx)("input",{accept:"image/*, .pdf, .xlsx",style:{display:"none"},id:"raised-button-file",multiple:!0,type:"file",onChange:async e=>{if(e.target.files){const a=e.target.files[0];try{const e=new FormData;e.append("attachment",a),e.append("case",s),await P.pb.collection("attachments").create(e),i(s)}catch(n){console.error(n)}}}}),(0,c.jsx)("label",{htmlFor:"raised-button-file",children:(0,c.jsx)(E.Z,{component:"span",sx:{borderRadius:"16px",padding:"6px 12px",fontSize:"0.75rem","&:hover":{backgroundColor:"#333333"}},children:"Add new file"})})]}),(0,c.jsx)(x.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(1, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},gap:2,width:{xs:"100%",sm:"100%"}},children:n.map((e=>(0,c.jsx)(Cs,{file:e},e.id)))}),l&&(0,c.jsx)(Ss,{open:l,setOpen:o})]})};var Ds=n(5762),Ts=n(389),ks=n(4593),Ms=n(8663),Is=n(3767),zs=n(6236);function As(e){let{onClose:s,open:n,start:t,end:l,caseId:o}=e;const[i,r]=a.useState(new Date),[d,h]=a.useState(new Date),[p,m]=(0,a.useState)([]),[u,j]=(0,a.useState)([]),[Z,g]=(0,a.useState)({}),b=(e,s)=>{g({...Z,[e]:s})};(0,a.useEffect)((()=>{(async()=>{const e=await P.pb.collection("users").getFullList({sort:"-created"});e&&m(e),console.log(e);const s=await P.pb.collection("procedures").getFullList();s&&j(s)})()}),[]),(0,a.useEffect)((()=>{t&&r(new Date(t)),l&&h(new Date(l))}),[t,l]),console.log(i,d);const y=()=>{s()};return(0,c.jsx)(Ds.ZP,{onClose:y,open:n,children:(0,c.jsxs)(Ts.Z,{sx:{width:{xs:"100%",sm:"60%"},p:2,position:"relative",overflowY:"auto",maxHeight:"100%"},children:[(0,c.jsx)(ks.Z,{}),(0,c.jsx)(Ms.Z,{children:"Schedule"}),(0,c.jsxs)(Is.Z,{spacing:2,children:[(0,c.jsxs)(Is.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"Surgeon"}),(0,c.jsx)(Ae.Z,{name:"assigned_to",placeholder:"Choose Surgeon",size:"sm",defaultValue:Z.assigned_to,onChange:(e,s)=>{b("assigned_to",s)},children:p&&p.filter((e=>"Surgeon"===e.role)).map((e=>(0,c.jsx)(He.Z,{value:e.id,children:e.name},e.id)))})]}),(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"Date"}),(0,c.jsx)(Y.ZP,{type:"date",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(i,"yyyy-MM-dd"),onChange:e=>{const s=new Date(e.target.value);s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),r(s)}})]})]}),(0,c.jsxs)(Is.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"From"}),(0,c.jsx)(Y.ZP,{type:"time",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(i,"HH:mm"),onChange:e=>{const s=(0,zs.Z)(e.target.value,"HH:mm",new Date),n=new Date(i);n.setHours(s.getHours()),n.setMinutes(s.getMinutes()),r(n)}})]}),(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"Until"}),(0,c.jsx)(Y.ZP,{type:"time",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(d,"HH:mm"),onChange:e=>{const s=(0,zs.Z)(e.target.value,"HH:mm",new Date),n=new Date(d);n.setHours(s.getHours()),n.setMinutes(s.getMinutes()),h(n)}})]})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Procedures"}),(0,c.jsx)(Ae.Z,{name:"procedures",placeholder:"Choose Procedures",size:"sm",multiple:!0,defaultValue:Z.procedures,onChange:(e,s)=>{b("procedures",s)},children:u&&u.map((e=>(0,c.jsx)(He.Z,{value:e.id,children:e.name},e.id)))})]}),(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Description"}),(0,c.jsx)(ze.Z,{name:"note",placeholder:"Surgery Description",minRows:"3",defaultValue:Z.note,onChange:e=>b("note",e.target.value)})]}),(0,c.jsxs)(x.Z,{sx:{mt:1,display:"flex",gap:1,flexDirection:{xs:"column",sm:"row-reverse"}},children:[(0,c.jsx)(E.Z,{disabled:!Z.assigned_to||!Z.procedures||!Z.note,variant:"solid",color:"primary",onClick:()=>{P.pb.authStore.model&&P.pb.collection("schedule_items").create({type:"surgery",start:i,end:d,user:P.pb.authStore.model.id,case:o,description:Z.note}).then((e=>{console.log(e),y()}))},children:"Save"}),(0,c.jsx)(E.Z,{variant:"outlined",color:"neutral",onClick:y,children:"Cancel"})]})]})]})})}var Hs=n(2074);const _s=e=>{let{open:s,setOpen:n,caseId:t,type:l}=e;const[o,i]=(0,a.useState)({type:"note",assigned_to:"",from:"",until:""}),r=(e,s)=>{i({...o,[e]:s})},[d,h]=(0,a.useState)([]);a.useEffect((()=>{(async()=>{const e=await P.pb.collection("users").getFullList({sort:"-created"});e&&h(e)})()}),[]);const[p,m]=(0,a.useState)(""),u=()=>n(!1);return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(x.Z,{sx:{width:"100%",overflowY:"auto"},children:(0,c.jsx)(Ds.ZP,{open:s,onClose:u,children:(0,c.jsxs)(Ts.Z,{sx:{width:{xs:"100%",md:"50%"}},children:[(0,c.jsx)(ks.Z,{onClick:u}),(0,c.jsx)(Z.ZP,{level:"title-md",sx:{mt:2},children:"Case Activity Item"}),(0,c.jsx)(oe.Z,{}),(0,c.jsx)("form",{onSubmit:async e=>{e.preventDefault();try{if(t&&o.type&&""!==o.note){let e={type:o.type,meta:{note:o.note},case:t,assigned_to:"action_required"==o.type?o.assigned_to:void 0};await P.pb.collection("case_activity_item").create(e)}u()}catch(s){u(),console.error(s)}},encType:"multipart/form-data",children:(0,c.jsx)(x.Z,{sx:{p:2},children:(0,c.jsxs)(ye.Z,{spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Type"}),(0,c.jsxs)(Ae.Z,{name:"type",placeholder:"Choose Type",size:"sm",defaultValue:o.type,onChange:(e,s)=>{r("type",s)},children:[(0,c.jsx)(He.Z,{value:"note",children:"Add Note"}),(0,c.jsx)(He.Z,{value:"action_required",children:"Assign Task"})]})]}),"action_required"===o.type&&(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Assign To"}),(0,c.jsx)(Ae.Z,{name:"assigned_to",placeholder:"Choose Assignee",size:"sm",defaultValue:o.assigned_to,onChange:(e,s)=>{r("assigned_to",s)},children:d&&d.map((e=>(0,c.jsx)(He.Z,{value:e.id,children:e.name},e.id)))})]}),o.type&&""!==o.type&&(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"note"===o.type?"Note":"Task Details"}),(0,c.jsx)(ze.Z,{name:"note",placeholder:"Enter Note",minRows:"3",value:o.note,onChange:e=>r("note",e.target.value)})]}),(0,c.jsx)(ye.Z,{direction:"row",justifyContent:"flex-end",spacing:2,children:(0,c.jsx)(E.Z,{color:"primary",size:"sm",type:"submit",children:"Submit"})})]})})})]})})})})};function Ns(){var e,s;const[n,t]=a.useState({open:!1,start:new Date,end:new Date}),l=(0,D.s0)(),{id:i}=(0,D.UO)(),[r,d]=(0,a.useState)({}),[h,p]=(0,a.useState)({first_name:"John",last_name:"Doe",email:"dd@kdk.com",phone:"123-456-7890",status:"scheduled",age:19,gender:"Male",case_activity_item:[{type:"note",user:33,attachments:[],note:"This patient is a good candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home. He is a good candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home.",created:"2023-12-03T13:56:00-04:00"},{type:"note",user:33,attachments:[],note:"This patient is a good  a candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home. He is a good candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home.",created:"2023-12-03T13:56:00-04:00"},{type:"note",user:33,attachments:[],note:"This patient is a good as candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home. He is a good candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home.",created:"2023-12-03T13:56:00-04:00"},{type:"note",user:33,attachments:[],note:"This patient is a good  3 candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home. He is a good candidate for surgery because of his age and health. He is a non-smoker and has no other health issues. He is also very active and has a good support system at home.",created:"2023-12-03T13:56:00-04:00"},{type:"surgery_scheduled_added",user:33,meta:{surgery_scheduled_id:90},created:"2023-12-03T09:00:00-04:00"}],surgery_scheduled:[{start:"2021-10-01T09:00:00-04:00",end:"2021-10-01T09:30:00-04:00",type:"surgery",duration:30,anesthesia_type:"choice",anesthesia_position:"surpine",specialty:"podiatry",procedures:[{name:"Right Akin",site:"foot",laterality:"right",cpt_code:"28285"},{name:"Weil osteotomy",site:"foot",laterality:"right",cpt_code:"28285"}]}]}),[m,u]=a.useState(!1);(0,a.useEffect)((()=>{(async()=>{try{if(i){const e=await P.pb.collection("cases").getOne(i,{expand:"schedule_items(case).procedures,case_activity_item(case).assigned_to"});if(e){let s=function(e){var s=Date.now()-new Date(e).getTime(),n=new Date(s);return Math.abs(n.getUTCFullYear()-1970)}(e.dob),n=[],a=[];e.expand&&(n=e.expand["case_activity_item(case)"]||[],a=e.expand["schedule_items(case)"]||[],console.log(a),n.sort(((e,s)=>new Date(s.created).getTime()-new Date(e.created).getTime()))),d({...e,age:s,activity_items:n,schedule_items:a.filter((e=>"surgery"===e.type))})}}}catch(e){console.error("Error fetching case details:",e)}})()}),[i,m]);return(0,c.jsxs)(ye.Z,{children:[(0,c.jsxs)(x.Z,{sx:{flex:1,width:"100%"},children:[(0,c.jsx)(x.Z,{sx:{bgcolor:"background.body"},children:(0,c.jsx)(x.Z,{sx:{px:{xs:2,md:6}},children:(0,c.jsx)(R.Z,{children:(0,c.jsxs)(ye.Z,{children:[(0,c.jsx)(ye.Z,{direction:"row",alignItems:"baseline",justifyContent:"space-between",spacing:3,children:(0,c.jsxs)(ye.Z,{direction:{md:"row",sm:"column"},alignItems:{md:"flex-start",sm:"center"},justifyContent:"center",spacing:3,children:[(0,c.jsx)(Me.Z,{ratio:"1",maxHeight:200,sx:{flex:1,minWidth:120,borderRadius:"100%"},children:(0,c.jsx)("img",{src:qe,alt:""})}),(0,c.jsxs)(ye.Z,{direction:"column",justifyContent:"space-between",children:[(0,c.jsxs)(Z.ZP,{level:"h2",sx:{mt:1,mx:2},children:[null===r||void 0===r?void 0:r.first_name," ",null===r||void 0===r?void 0:r.last_name]}),(0,c.jsxs)(ye.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",children:[(0,c.jsxs)(ye.Z,{direction:"column",justifyContent:"flex-start ",children:[(0,c.jsxs)(Z.ZP,{level:"title-sm",sx:{mt:1,mb:2,mx:2},children:["Age ",null===r||void 0===r?void 0:r.age]}),(0,c.jsxs)(Z.ZP,{level:"title-sm",sx:{mt:1,mb:2,mx:2},children:["Gender ",h.gender]})]}),(0,c.jsxs)(ye.Z,{direction:"column",justifyContent:"flex-start",children:[(0,c.jsxs)(Z.ZP,{level:"title-sm",sx:{mt:1,mb:2,mx:2},children:["Status",(0,c.jsx)(le.Z,{sx:{ml:3},color:"primary",children:null===r||void 0===r?void 0:r.status})]}),(0,c.jsxs)(Z.ZP,{level:"title-sm",sx:{mt:1,mb:2,mx:2},children:["Email ",null===r||void 0===r?void 0:r.email]})]})]})]})]})}),(0,c.jsxs)(ye.Z,{direction:"row",alignItems:"flex-end",justifyContent:"flex-end",spacing:3,children:[(0,c.jsx)(o.ZP,{title:"Add Note",variant:"soft",color:"primary",size:"sm",onClick:()=>u(!0),children:(0,c.jsx)(ls.Z,{})}),(0,c.jsx)(o.ZP,{title:"Schedule",variant:"soft",color:"primary",size:"sm",onClick:()=>function(){let{start:e=new Date,end:s=(0,Hs.Z)(new Date,1)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t({open:!0,start:e,end:s})}(),children:(0,c.jsx)(rs.Z,{})}),(0,c.jsx)(o.ZP,{title:"Patient Profile",variant:"soft",color:"primary",size:"sm",onClick:()=>{l("/cases/"+i,{replace:!0})},children:(0,c.jsx)(ys.Z,{})})]})]})})})}),(0,c.jsxs)(ss.Z,{defaultValue:1,sx:{bgcolor:"transparent"},children:[(0,c.jsxs)(ns.Z,{tabFlex:1,size:"sm",sx:{zIndex:1e3,position:"sticky",top:{sm:3e3,md:0},bgcolor:"background.body",pl:{xs:0,md:4},justifyContent:"left",["&& .".concat(as.Z.root)]:{flex:"initial",bgcolor:"transparent",["&.".concat(as.Z.selected)]:{fontWeight:"600","&::after":{height:"2px",bgcolor:"primary.500"}}}},children:[(0,c.jsx)(ts.Z,{sx:{borderRadius:"6px 6px 0 0"},indicatorInset:!0,value:0,children:"Primary Details"}),(0,c.jsx)(ts.Z,{sx:{borderRadius:"6px 6px 0 0"},indicatorInset:!0,value:1,children:"Activity Log"}),(0,c.jsx)(ts.Z,{sx:{borderRadius:"6px 6px 0 0"},indicatorInset:!0,value:2,children:"Documents"})]}),(0,c.jsx)(os.Z,{value:0,children:(0,c.jsx)(ds.Z,{variant:"plain",transition:"0.2s",sx:{maxWidth:"100%",mx:"auto",px:{xs:2,md:6},py:{xs:2,md:3},borderRadius:"md",["& .".concat(hs.Z.content,".").concat(hs.Z.expanded)]:{paddingBlock:"1rem"},["& .".concat(ps.Z.button)]:{paddingBlock:"1rem"}},children:(null===r||void 0===r||null===(e=r.schedule_items)||void 0===e?void 0:e.length)>0&&(null===r||void 0===r||null===(s=r.schedule_items)||void 0===s?void 0:s.map((e=>(0,c.jsxs)(cs.Z,{children:[(0,c.jsxs)(ms.Z,{children:[(0,c.jsx)(te.Z,{color:"primary",children:(0,c.jsx)(us.Z,{})}),(0,c.jsx)(j.Z,{children:(0,c.jsx)(Z.ZP,{level:"title-md",children:"Sugery Details"})})]}),(0,c.jsx)(xs.Z,{children:(0,c.jsx)(is,{surgeryDetails:h.surgery_scheduled[0],surgeryDetail:e})})]}))))})}),(0,c.jsx)(os.Z,{value:1,children:(0,c.jsx)(ds.Z,{variant:"plain",transition:"0.2s",sx:{maxWidth:"100%",mx:"auto",px:{xs:2,md:6},py:{xs:2,md:3},borderRadius:"md",["& .".concat(hs.Z.content,".").concat(hs.Z.expanded)]:{paddingBlock:"1rem"},["& .".concat(ps.Z.button)]:{paddingBlock:"1rem"}},children:(0,c.jsx)(bs,{case_activity_item:(null===r||void 0===r?void 0:r.activity_items)||[]})})}),(0,c.jsx)(os.Z,{value:2,children:(0,c.jsx)(Ps,{caseId:i})})]})]}),m&&(0,c.jsx)(_s,{open:m,setOpen:u,caseId:i,type:"note"}),n&&(0,c.jsx)(As,{open:n.open,start:n.start,end:n.end,onClose:()=>t(null),caseId:i})]})}var Rs,Gs,Fs,Bs,Es,Ls,Ws,Os,Us=n(168),Vs=n(225),Ks=n(4690);const Ys=50,qs=Vs.Z.div(Rs||(Rs=(0,Us.Z)(["\n    overflow: auto;\n    height: 100%;\n    width: 100%;\n"]))),Js=Vs.Z.div(Gs||(Gs=(0,Us.Z)(["\n  display: flex;\n"]))),Xs=Vs.Z.div(Fs||(Fs=(0,Us.Z)(["\n  border-right: 1px solid #ddd;\n  padding: 0px 10px;\n  text-align: center;\n  position: sticky;\n  left: 0;\n  background-color: #f0f0f0;\n  z-index: 1;\n\n  height: ","px;\n  display: flex;\n  flex-direction: column;\n"])),1250),Qs=Vs.Z.div(Bs||(Bs=(0,Us.Z)(["\n  flex: 1;\n  position: relative;\n  height: ","px;\n  display: flex;\n  flex-direction: column;\n"])),1250),$s=Vs.Z.div(Es||(Es=(0,Us.Z)(["\n  border-bottom: 1px solid #ddd;\n  padding: 10px;\n  text-align: center;\n  font-weight: bold;\n  position: sticky;\n  top: 0;\n  background-color: #f0f0f0;\n  z-index: 1;\n  flex:1;\n\n"]))),en=Vs.Z.div(Ls||(Ls=(0,Us.Z)(["\n  border-right: 1px solid #ddd;\n  border-bottom: 1px solid #ddd;\n  padding: 10px;\n  text-align: center;\n  flex:1;\n  \n  :hover {\n    background-color: #f0f0f0;\n    cursor: pointer;\n  }\n\n"]))),sn=Vs.Z.div(Ws||(Ws=(0,Us.Z)(["\n  position: absolute;\n  padding: 5px;\n  border-radius: 4px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  transition: box-shadow 0.2s ease-in-out;\n\n  &:hover {\n    cursor: pointer;\n    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.2);\n  }\n"]))),nn=((0,Vs.Z)(sn)(Os||(Os=(0,Us.Z)(["\n  background-color: #4caf50;\n"]))),e=>{let{events:s,range:n={start:(0,fe.Z)(new Date).toDateString(),end:(0,fe.Z)(new Date).toDateString()},onSelectRange:t,onEventClick:l}=e;const o=Array.from({length:24},((e,s)=>s)),i=(0,a.useMemo)((()=>Array.from({length:7},((e,s)=>{const a=new Date(n.start);return a.setDate(a.getDate()+s),a.toISOString().split("T")[0]}))),[n]);return(0,c.jsx)(qs,{children:(0,c.jsxs)(Js,{children:[(0,c.jsxs)(Xs,{children:[(0,c.jsx)("div",{style:{height:Ys}}),o.map((e=>(0,c.jsx)("div",{style:{height:Ys},children:"".concat(e%12===0?12:e%12," ").concat(e<12?"AM":"PM")},e)))]}),i.map(((e,n)=>{const a=new Date(e),i=(e=>{const n=new Date(e);return s.filter((e=>{const s=new Date(e.startTime);return(0,Ks.Z)(s,n)}))})(e);return(0,c.jsxs)(Qs,{children:[(0,c.jsx)($s,{children:a.toLocaleDateString([],{weekday:"short",month:"short",day:"numeric"})}),o.map((s=>(0,c.jsx)(en,{style:{height:Ys},onClick:n=>{((e,s)=>{const n=new Date(e);n.setHours(s),t(n,new Date(n.getTime()+36e5))})(e,s)}},"".concat(n,"-").concat(s)))),i.map(((e,s)=>{const n=9e4,a=new Date(e.startTime),t=new Date(e.endTime),o=60*a.getHours()*60+60*a.getMinutes()+a.getSeconds(),i=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),r=100*o/n,d=100*(i-o)/n;return console.log("event",e,{startSeconds:o,endSeconds:i,secondsInDay:n,topPercent:r}),(0,c.jsxs)(sn,{style:{top:"".concat(r,"%"),height:"".concat(d,"%"),transform:"translateY(".concat(Ys,"px)"),backgroundColor:"surgery"===e.type?"#4caf50":"#a44336",color:"#fff"},onClick:()=>{l(e)},children:[(0,c.jsx)("div",{children:e.title}),(0,c.jsx)("div",{children:"".concat(new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," - ").concat(new Date(e.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]},s)}))]},n)}))]})})});var an=n(6739);function tn(e){let{onClose:s,onBlockTimeCreated:n,open:t,start:l,end:o}=e;const[i,r]=a.useState(new Date),[d,h]=a.useState(new Date);(0,a.useEffect)((()=>{l&&r(new Date(l)),o&&h(new Date(o))}),[l,o]),console.log(i,d);const p=()=>{s()};return(0,c.jsx)(Ds.ZP,{onClose:p,open:t,children:(0,c.jsxs)(Ts.Z,{children:[(0,c.jsx)(ks.Z,{}),(0,c.jsx)(Ms.Z,{children:"Block Time"}),(0,c.jsx)(Z.ZP,{variant:"p",children:"Block your calendar and let your team know you're busy."}),(0,c.jsxs)(Is.Z,{spacing:2,children:[(0,c.jsxs)(U.Z,{children:[(0,c.jsx)(V.Z,{children:"Date"}),(0,c.jsx)(Y.ZP,{type:"date",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(i,"yyyy-MM-dd"),onChange:e=>{const s=new Date(e.target.value);s.setHours(i.getHours()),s.setMinutes(i.getMinutes()),r(s)}})]}),(0,c.jsxs)(Is.Z,{direction:"row",spacing:2,children:[(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"From"}),(0,c.jsx)(Y.ZP,{type:"time",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(i,"HH:mm"),onChange:e=>{const s=(0,zs.Z)(e.target.value,"HH:mm",new Date),n=new Date(i);n.setHours(s.getHours()),n.setMinutes(s.getMinutes()),r(n)}})]}),(0,c.jsxs)(U.Z,{sx:{flex:1},children:[(0,c.jsx)(V.Z,{children:"Until"}),(0,c.jsx)(Y.ZP,{type:"time",slotProps:{input:{min:"2018-06-07T00:00",max:"2018-06-14T00:00"}},value:(0,Se.Z)(d,"HH:mm"),onChange:e=>{const s=(0,zs.Z)(e.target.value,"HH:mm",new Date),n=new Date(d);n.setHours(s.getHours()),n.setMinutes(s.getMinutes()),h(n)}})]})]}),(0,c.jsxs)(x.Z,{sx:{mt:1,display:"flex",gap:1,flexDirection:{xs:"column",sm:"row-reverse"}},children:[(0,c.jsx)(E.Z,{variant:"solid",color:"primary",onClick:()=>{P.pb.collection("schedule_items").create({type:"block",start:i,end:d,user:P.pb.authStore.model.id}).then((e=>{console.log(e),p(),n(e)}))},children:"Save"}),(0,c.jsx)(E.Z,{variant:"outlined",color:"neutral",onClick:p,children:"Cancel"})]})]})]})})}function ln(){const e=(0,D.s0)(),[s,n]=a.useState(),[t,l]=a.useState({start:(0,fe.Z)(new Date).toISOString(),end:(0,ve.Z)(new Date).toISOString()}),[o,i]=a.useState({open:!1,start:new Date,end:new Date}),r=function(){let{start:e=new Date,end:s=(0,Hs.Z)(new Date,1)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i({open:!0,start:e,end:s})},d=(0,a.useMemo)((()=>s?s.items.map((e=>({id:e.id,title:e.title,startTime:e.start,endTime:e.end,type:e.type,case:e.case}))):[]),[s]),h=async()=>{var e;P.pb.collection("schedule_items").getList(1,50,{filter:'user.id = "'.concat(null===(e=P.pb.authStore.model)||void 0===e?void 0:e.id,'"'),expand:"case"}).then((e=>{n(e)})).catch((e=>{console.error(e)}))};(0,a.useEffect)((()=>{h()}),[]);return(0,c.jsxs)("div",{children:[(0,c.jsxs)(Is.Z,{direction:"row",gap:1,justifyContent:"space-between",mb:2,children:[(0,c.jsx)(Z.ZP,{level:"h2",children:"Assigned To You"}),(0,c.jsx)(E.Z,{color:"primary",startDecorator:(0,c.jsx)(an.Z,{}),size:"sm",onClick:()=>r(),children:"Block Time"})]}),(0,c.jsx)(nn,{events:d,range:t,onSelectRange:(e,s)=>{r({start:e,end:s})},onEventClick:s=>{"block"!==s.type&&(console.log(s),e("/cases/details/".concat(s.case)))}}),o&&(0,c.jsx)(tn,{open:o.open,start:o.start,end:o.end,onClose:()=>i(null),onBlockTimeCreated:h})]})}function on(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(x.Z,{component:"main",className:"MainContent",sx:{marginLeft:{md:"var(--Sidebar-width)"},px:{xs:2,md:6},pt:{xs:"calc(12px + var(--Header-height))",sm:"calc(12px + var(--Header-height))",md:3},pb:{xs:2,sm:2,md:3},flex:1,display:"flex",flexDirection:"column",minWidth:0,height:"100dvh",gap:1},children:(0,c.jsx)(a.Suspense,{fallback:(0,c.jsx)(N.Z,{color:"primary"}),children:(0,c.jsxs)(D.Z5,{children:[(0,c.jsx)(D.AW,{path:"/cases/details/:id",element:(0,c.jsx)(Ns,{})},"cases"),(0,c.jsx)(D.AW,{path:"/cases/:id",element:(0,c.jsx)(Je,{})},"cases"),(0,c.jsx)(D.AW,{path:"/cases/*",element:(0,c.jsx)(ae,{})},"cases"),(0,c.jsx)(D.AW,{path:"/calendar",element:(0,c.jsx)(ln,{})},"Calendar"),(0,c.jsx)(D.AW,{path:"/dashboard",element:(0,c.jsx)(O,{})},"dashboard"),(0,c.jsx)(D.AW,{path:"/assigned",element:(0,c.jsx)(ke,{})},"assigned"),(0,c.jsx)(D.AW,{path:"/addCase",element:(0,c.jsx)(es,{})},"addCase")]})})})})}var rn=n(9655);function dn(){return 0==P.pb.authStore.isValid?(0,c.jsx)(D.Fg,{replace:!0,to:"/login"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{}),(0,c.jsx)(k,{menuItems:_}),(0,c.jsx)(on,{}),(0,c.jsx)(rn.Ix,{position:"top-right",autoClose:2e3})]})}}}]);
//# sourceMappingURL=97.24a05f12.chunk.js.map